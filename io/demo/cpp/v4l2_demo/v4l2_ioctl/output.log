Starting V4L2 Camera Test with optimizations...
Attempting to use DMA-BUF for buffer management...
Device opened successfully: /dev/video0
Querying device capabilities...
Device capabilities queried successfully.
Device: bcm2835 mmal (mmal service 16.1)
Bus info: platform:bcm2835_v4l2-0
Device supports video capture and streaming.
Supported formats:
  0: Planar YUV 4:2:0 (0x32315559) [YU12]
  1: YUYV 4:2:2 (0x56595559) [YUYV]
  2: 24-bit RGB 8-8-8 (0x33424752) [RGB3]
  3: JFIF JPEG (0x4745504a) [JPEG]
  4: H.264 (0x34363248) [H264]
  5: Motion-JPEG (0x47504a4d) [MJPG]
  6: YVYU 4:2:2 (0x55595659) [YVYU]
  7: VYUY 4:2:2 (0x59555956) [VYUY]
  8: UYVY 4:2:2 (0x59565955) [UYVY]
  9: Y/UV 4:2:0 (0x3231564e) [NV12]
  10: 24-bit BGR 8-8-8 (0x33524742) [BGR3]
  11: Planar YVU 4:2:0 (0x32315659) [YV12]
  12: Y/VU 4:2:0 (0x3132564e) [NV21]
  13: 32-bit XBGR 8-8-8-8 (0x34325852) [RX24]

Checking supported resolutions for common formats...
  ✓ 1920x1080 supported
  ✓ 1640x1232 supported
  ✓ 1280x720 supported
  ✓ 640x480 supported
  ✓ 320x240 supported
Getting current format...
Current format: 0x56595559 [YUYV]
Current size: 1920x1080
Bytes per line: 3840
Getting default format...

Trying to set 1920x1080 resolution with YUYV format...
Successfully set to 1920x1080 with YUYV!
Final format: 1920x1080
Format: 0x56595559 [YUYV]
Bytes per line: 3840
Attempting to initialize DMA-BUF...
DMA-BUF: Allocated 3 buffers
DMA-BUF initialization complete, but using MMAP for buffer mapping.
Allocated 3 buffers
Buffer 0 mapped: length=4177920 offset=0
Buffer 1 mapped: length=4177920 offset=32768
Buffer 2 mapped: length=4177920 offset=65536
3 buffers mapped successfully.
Using MMAP for buffer management.
Streaming started.
Camera streaming started. Starting FPS measurement (no file saving)...
Timing: select() took 4206 us, VIDIOC_DQBUF took 15 us.
Frame 1 timing breakdown:
  Capture: 4324 us
  Save: 0 us
  Release: 34 us
  Total: 4358 us (229.463 FPS potential)
Timing: select() took 2498 us, VIDIOC_DQBUF took 12 us.
Frame 2 timing breakdown:
  Capture: 2597 us
  Save: 0 us
  Release: 19 us
  Total: 2617 us (382.117 FPS potential)
Timing: select() took 3800 us, VIDIOC_DQBUF took 13 us.
Frame 3 timing breakdown:
  Capture: 3902 us
  Save: 0 us
  Release: 24 us
  Total: 3927 us (254.647 FPS potential)
Timing: select() took 2672 us, VIDIOC_DQBUF took 13 us.
Frame 4 timing breakdown:
  Capture: 2780 us
  Save: 0 us
  Release: 26 us
  Total: 2806 us (356.379 FPS potential)
Timing: select() took 1005 us, VIDIOC_DQBUF took 16 us.
Frame 5 timing breakdown:
  Capture: 1118 us
  Save: 0 us
  Release: 24 us
  Total: 1143 us (874.891 FPS potential)
Elapsed time: 3.62s, FPS: 8.28
Elapsed time: 7.16s, FPS: 8.38
Elapsed time: 10.70s, FPS: 8.41
Elapsed time: 14.25s, FPS: 8.42
